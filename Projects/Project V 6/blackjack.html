<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Blackjack Trial</title>
<link type="text/css" rel="stylesheet" href="stylesheets/blackjackstylesheet.css">
<script>
function breakLine(){
	var br = document.createElement("BR");
	document.getElementById("messageArea").appendChild(br);
	}

//THE PLAYER
function Player(){
	this.cards={
		Count:0,
		Value:0
	};
	this.CardPosition=1;
	this.Hit = function(card){
		var ndeck = deck.splice(0,1);
		var card = ndeck[0];
		player.cards.Value += card.value;
		document.getElementById("PlayerCard"+player.CardPosition).innerHTML="<img src='"+card.img+"'/>";
		player.CardPosition++;
		var node = document.createElement("LI");                 // Create a <li> node
		var textnode = document.createTextNode("Your card value: "+player.cards.Value);         // Create a text node
		node.appendChild(textnode);                              // Append the text to <li>
		document.getElementById("messageArea").appendChild(node);
		breakLine();
		checkValues(player, dealer, deck, playing);
		console.log("Players "+(player.CardPosition-1)+" card is worth "+card.value+". Total: "+player.cards.Value);
	};
	this.Hold= function(){
		var playing = false;
		document.getElementById(Hit).disabled;
		document.getElementById(Hold).disabled;
	};
}
//THE DEALER
function Dealer(){
	this.cards={
		deck:new Array,
		Count:0,
		Value:0
	}
	this.CardPosition=1;
	this.Hit = function(card){
		var ndeck = deck.splice(0,1);
		var card = ndeck[0];
		dealer.cards.Value += card.value;
			if(dealer.CardPosition<=8){
			document.getElementById("DealerCard"+dealer.CardPosition).innerHTML="<img src='"+card.img+"'/>";
			dealer.CardPosition++;
			}else{
			console.log("Dealer cards go over 8 slots");
			}
		var node = document.createElement("LI");                 							// Create a <li> node
		var textnode = document.createTextNode("Dealers card value: "+dealer.cards.Value); // Create a text node
		node.appendChild(textnode);                             						  // Append the text to <li>
		document.getElementById("messageArea").appendChild(node);
		checkValues(player, dealer, deck, playing);
		console.log("Dealers "+(dealer.CardPosition-1)+" card is worth "+card.value+". Total: "+dealer.cards.Value);
	}
	this.Hold= function(){
		console.log("Dealer is holding");
	}
	this.CardPosition=1
}
var deck = [
//`````````````````CLUBS```````````````````````````
	
	c1 = {img:"cards/1.png",value:1},
	c2 = {img:"cards/2.png",value:2},
	c3 = {img:"cards/3.png",value:3},
	c4 = {img:"cards/4.png",value:4},
	c5 = {img:"cards/5.png",value:5},
	c6 = {img:"cards/6.png",value:6},
	c7 = {img:"cards/7.png",value:7},
	c8 = {img:"cards/8.png",value:8},
	c9 = {img:"cards/9.png",value:9},
	c10 = {img:"cards/10.png",value:10},
	c11 = {img:"cards/11.png",value:10},
	c12 = {img:"cards/12.png",value:10},
	c13 = {img:"cards/13.png",value:10},
//```````````````DIAMONDS```````````````````````````
	d1 = {img:"cards/14.png",value:1},
	d2 = {img:"cards/15.png",value:2},
	d3 = {img:"cards/16.png",value:3},
	d4 = {img:"cards/17.png",value:4},
	d5 = {img:"cards/18.png",value:5},
	d6 = {img:"cards/19.png",value:6},
	d7 = {img:"cards/20.png",value:7},
	d8 = {img:"cards/21.png",value:8},
	d9 = {img:"cards/22.png",value:9},
	d10 = {img:"cards/23.png",value:10},
	d11 = {img:"cards/24.png",value:10},
	d12 = {img:"cards/25.png",value:10},
	d13 = {img:"cards/26.png",value:10},
//``````````````````````````````SPADES``````````````````````````
	s1 = {img:"cards/27.png",value:1},
	s2 = {img:"cards/28.png",value:2},
	s3 = {img:"cards/29.png",value:3},
	s4 = {img:"cards/30.png",value:4},
	s5 = {img:"cards/31.png",value:5},
	s6 = {img:"cards/32.png",value:6},
	s7 = {img:"cards/33.png",value:7},
	s8 = {img:"cards/34.png",value:8},
	s9 = {img:"cards/35.png",value:9},
	s10 = {img:"cards/36.png",value:10},
	s11 = {img:"cards/37.png",value:10},
	s12 = {img:"cards/38.png",value:10},
	s13 = {img:"cards/39.png",value:10},
//`````````````````````````````````````````````````HEARTS````````````````````````````
	h1 = {img:"cards/40.png",value:1},
	h2 = {img:"cards/41.png",value:2},
	h3 = {img:"cards/42.png",value:3},
	h4 = {img:"cards/43.png",value:4},
	h5 = {img:"cards/44.png",value:5},
	h6 = {img:"cards/45.png",value:6},
	h7 = {img:"cards/46.png",value:7},
	h8 = {img:"cards/47.png",value:8},
	h9 = {img:"cards/48.png",value:9},
	h10 = {img:"cards/49.png",value:10},
	h11 = {img:"cards/50.png",value:10},
	h12 = {img:"cards/51.png",value:10},
	h13 = {img:"cards/52.png",value:10}
//==============================END OF CARDS ===============================
];


Deckshuffle=function(nTimes, deck){
	for(var fan=1;fan<=nTimes;fan++){
		for(var num=deck.length-1;num>=1;num--){
			//Swap the cards
			var rand=Math.floor((Math.random()*num)); 
			var temp=deck[num];
			deck[num]=deck[rand];
			deck[rand]=temp;
		}
	}
}

var playing = true;

function getCookie(cname){
	var name = cname;
	var ca = document.cookie.split(";");
	for(var i=0; i<ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1);
        if (c.indexOf(name) != -1) return c.substring(name.length, c.length);
    }
    return "";
}
//SHUFFLE
function shuffle(nTimes, deck){
	for(var fan=1;fan<=nTimes;fan++){
		for(var num=deck.length-1;num>=1;num--){
			//Swap the cards
			var rand=Math.floor((Math.random()*num)); 
			var temp=deck[num];
			deck[num]=deck[rand];
			deck[rand]=temp;
		}
	}
}

//WRITE MESSAGE TO THE MESSAGE AREA ID
function writeMessage(message){
		var node = document.createElement("LI");                 // Create a <li> node
		document.getElementById("messageArea").appendChild(node);
		var textnode = document.createTextNode(message);         // Create a text node
		node.appendChild(textnode);                              // Append the text to <li>
		document.getElementById("messageArea").appendChild(node);
}
</script>
</head>
<body id="BlackJackBody">
<header>
		<img src="images/logo.png" width="134" height="54"/>
    	<ul class="nav">
       	  <li><a href="index.html">Home</a></li>
            <li><a href="games.html">Products</a></li>
            <li><a href="about.html">About</a></li>
            <li class="ln"><a href="shoppingcart.html">Shopping Cart</a></li>
			<li><a href="games.html">Games</a></li>
		</ul>
</header>
   <table border="1px" align="center" id="blackJackArea">
		<!--DEALER AREA-->
        <tr>
        	<td colspan="8" width="255" id="cardHeader">~DEALER CARDS~</td>
        </tr>
		<tr>
			<td id="DealerCard1"></td>
			<td id="DealerCard2"></td>
			<td id="DealerCard3"></td>
			<td id="DealerCard4"></td>
			<td id="DealerCard5"></td>
            <td id="DealerCard6"></td>
            <td id="DealerCard7"></td>
            <td id="DealerCard8"></td>
		</tr>
		
		<!--PLAYER AREA-->
        <tr>
        	<td colspan="8" id="cardHeader">~PLAYER CARDS~</td>
        </tr>
		<tr>
			<td id="PlayerCard1"></td>
			<td id="PlayerCard2"></td>
			<td id="PlayerCard3"></td>
			<td id="PlayerCard4"></td>
			<td id="PlayerCard5"></td>
            <td id="PlayerCard6"></td>
            <td id="PlayerCard7"></td>
            <td id="PlayerCard8"></td>
		</tr>
        
        <!--CONTROL AREA-->
        <tr>
        	<td id="control" colspan="8"> <button id="hit" onClick=player.Hit() type="button">Hit</button> <button id="player.Hold" onClick=hold() type="button">Hold</button></td>
        </tr>
   </table>
   <div id="messageArea">
		<ul>
			<li>Welcome to Blackjack!</li>
		</ul>
   </div>
	<script>
var turn = 1;
var nDeck = shuffle(7, deck);
var player = new Player;
var dealer = new Dealer
var choice = "";

	function clean(player, dealer, deck){
	document.getElementById("messageArea").innerHTML="End of round...new Round Starting!";
	player.cards.Value = 0;
	player.CardPosition = 1;
	dealer.cards.Value = 0;
	dealer.CardPosition = 1;
	playing = true;
	var i = 1;
	while(i<9){
		document.getElementById("PlayerCard"+i).innerHTML=" ";
		document.getElementById("DealerCard"+i).innerHTML=" ";
		i++
	}
	return playing;
}
//CHECK VALUES!!
function checkValues(player, dealer, deck, playing){
	if(player.cards.Value == 21){
		//PLAYER WINS
		console.log("Player got exactly 21 cards!");
		console.log("Total was "+player.cards.Value);
		console.log("Dealer had "+dealer.cards.Value);
		turn++;
		alert("YOU WIN!! How did you get 21 exactly? Have you been cheating??");
		clean(player, dealer, deck);
	}
	if(playing == false&&dealer.cards.Value>21){
		//PLAYER WINS
		console.log("Player held and the player has won");
		console.log("Total was "+player.cards.Value);
		console.log("Dealer had "+dealer.cards.Value);
		turn++;
		alert("YOU WIN!!");
		clean(player, dealer, deck);
	}
	if(playing == false&&dealer.cards.Value<player.cards.Value){
			console.log("The dealer has less cards");
	}
	//PLAYER BUST
	if(player.cards.Value>21){
		//DEALER WINS
		console.log("You BUST! Dealer has won");
		console.log("Total was "+player.cards.Value);
		console.log("Dealer had "+dealer.cards.Value);
		turn++;
		alert("Dealer has won, better luck next time sucka!");
		clean(player, dealer, deck);
	}
	if(dealer.cards.Value>21){
		//PLAYER WINS
		console.log("Dealer BUST! Player has won");
		console.log("Total was "+player.cards.Value);
		console.log("Dealer had "+dealer.cards.Value);
		turn++;
		alert("YOU WIN!! (Only because the dealer busted though...)");
		clean(player, dealer, deck);
	}
	if (playing == false){
		if(player.cards.Value>21){
			//DEALER WINS
			console.log("You BUST and the Dealer has won");
			console.log("Total was "+player.cards.Value);
			console.log("Dealer had "+dealer.cards.Value);
			turn++;
			alert("Dealer has won, better luck next time sucka!");
			clean(player, dealer, deck);
		}
			
	}
}
//RUNS WHEN PAGE LOADS
function game(nDeck) {
	alert( "THIS IS A TRIAL!Thank you trying out our BlackJack Deluks computer game! This is a game trial, you can play the game a total of 5 times before prompted to purchase the game. Please enjoy! :) ~A.S 'Reevo'" );
	while(turn<6){
		writeMessage("-----------------THE SCRIPT HAS STARTED-----------------");
		console.log("Turn # is"+turn);
		player.Hit(nDeck);
		dealer.Hit(nDeck);
		player.Hit(nDeck);
		dealer.Hit(nDeck);
		writeMessage("Will you Hit Or Hold?");
		player.Hit(nDeck);
		dealer.Hit(nDeck);
		player.Hit(nDeck);
	}
}
	do{
		choice=prompt("Deal? y or n");
	}while(choice!="y");
	
	if(choice =="y"){
		game(nDeck)
	}else {
	alert("Then we shall not deal...");
	}
</script>
</body>
</html>
